<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
    PUBLIC "-//iBATIS.com//DTD SQL Map Config 2.0//EN"
    "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap>
	<!-- SubsParentalIbatis -->
	
	<resultMap id="resultSubsParentalVO" class="cl.laaraucana.simat.entidades.SubsParentalVO">
	
		<result property="idParental" column="SM_ID" />	
		<result property="mes_informacion" column="SMMESINFO" />
		<result property="codigo_entidad" column="SMCODENTID" />
		<result property="agencia_entidad" column="SMAGEENTID" />
		<result property="rut_empleador" column="SMRUTEMPLE" />
		<result property="nombre_empleador" column="SMNOMEMPLE" />
		
		<result property="run_beneficiario_parental" column="SMRUNBENPA" />
		<result property="nombre_beneficiario_parental" column="SMNOMBENPA" />
		<result property="edad" column="SMEDAD" />
		<result property="sexo" column="SMSEXO" />
		<result property="calidad_trabajador" column="SMCALITRAB" />
		<result property="actividad_laboral_trabajador" column="SMACLABTRA" />
		<result property="cod_comuna_beneficiario" column="SMCODCOBEN" />
		<result property="run_beneficiario_postnatal" column="SMRUNBENEF" />
		<result property="nombre_beneficiario_postnatal" column="SMNOMBENPO" />
		<result property="nro_licencia" column="SMNROLICEN" />
		
		<result property="vinculo_beneficiario_menor" column="SMVINBEMEN" />
		<result property="nro_resolucion" column="SMNRORESOL" />
		<result property="tipo_extension_postnatal_parental" column="SMEXTPOSPA" />
		
		<result property="fecha_inicio_postnatal_parental" column="SMFECINPSP" />
		<result property="fecha_inicio_postnatal_parental_Char" column="SMFECINPSP_C" />
		
		<result property="fecha_termino_postnatal_parental" column="SMFECTEPSP" />
		<result property="fecha_termino_postnatal_parental_Char" column="SMFECTEPSP_C" />
		
		<result property="num_dias_permiso_pagado" column="SMNUMDIAPA" />
		<result property="tipo_de_pago" column="SMTIPOPAGO" />
		<result property="monto_sub_dfl44_1978" column="SMDFL44_78" />
		<result property="monto_sub_pagado" column="SMMONTPAGO" />
		<result property="tipo_emision" column="SMTIPOEMIS" />
		
		<result property="mes_nomina" column="SMMESNOMIN" />
		<result property="mod_pago" column="SMMODPAGO" />
		<result property="serie_documento" column="SMSERIEDOC" />
		<result property="num_documento" column="SMNUMDOC" />
		
		<result property="fecha_emision_documento" column="SMFECEMDOC" />
		<result property="fecha_emision_documento_Char" column="SMFECEMDOC_C" />
		
		<result property="monto_documento" column="SMMONTODOC" />
		<result property="codigo_banco" column="SMCODBANCO" />
		<result property="cta_cte" column="SMCTA_CTE" />
		<result property="causal_emision" column="SMCAUSAEMI" />		
		<result property="num_dias_cotiz_pagados" column="SMDIACOTPA" />
		
		<result property="monto_remun_imponible" column="SMMONREIMP" />
		<result property="monto_fp" column="SMMONTOFP" />
		<result property="monto_salud" column="SMMONSALUD" />
		<result property="monto_salud_ad" column="SMMONSALAD" />
		<result property="monto_desahucio" column="SMMONDESAH" />
		<result property="monto_cotiz_fu" column="SMMONCOTFU" />
		<result property="monto_cotiz_sc" column="SMMONCOTSC" />
		<result property="entidad_previsional" column="SMENTPREVI" />
		<result property="traspaso" column="SMTRASPASO" />
		<result property="subsidio_iniciado" column="SMSUBSINIC" />
		<result property="indicador_convenio" column="SMINDCONVE" />
		
		<result property="serv_salud" column="SERV_SALUD" />
		
	</resultMap>
		
	<!-- Ejemplo de sentencia SQL -->

	<!-- sentencia para obtener la lista de los registros a mostrar -->
	
	<select id="getList_SMF03" resultMap="resultSubsParentalVO">
		select 
			SM_ID,
			TRIM(IFNULL(SMMESINFO,'')) as SMMESINFO,
			TRIM(IFNULL(SMCODENTID,0)) as SMCODENTID,
			TRIM(IFNULL(SMAGEENTID,'')) as SMAGEENTID,
			TRIM(IFNULL(SMRUTEMPLE,'')) as SMRUTEMPLE,
			TRIM(IFNULL(SMNOMEMPLE,'')) as SMNOMEMPLE,
			TRIM(IFNULL(SMRUNBENPA,'')) as SMRUNBENPA,
			TRIM(IFNULL(SMNOMBENPA,'')) as SMNOMBENPA,
			TRIM(IFNULL(SMEDAD,0)) as SMEDAD,
			TRIM(IFNULL(SMSEXO,'')) as SMSEXO,
			TRIM(IFNULL(SMCALITRAB,0)) as SMCALITRAB,
			TRIM(IFNULL(SMACLABTRA,'')) as SMACLABTRA,
			TRIM(IFNULL(SMCODCOBEN,'')) as SMCODCOBEN,
			TRIM(IFNULL(SMRUNBENEF,'')) as SMRUNBENEF,
			TRIM(IFNULL(SMNOMBENPO,'')) as SMNOMBENPO,
			TRIM(IFNULL(SMNROLICEN,'')) as SMNROLICEN,
			TRIM(IFNULL(SMVINBEMEN,0)) as SMVINBEMEN,
			TRIM(IFNULL(SMNRORESOL,'')) as SMNRORESOL,
			TRIM(IFNULL(SMEXTPOSPA,0)) as SMEXTPOSPA,
			CASE  
				WHEN SMFECINPSP IS NULL THEN ''
				WHEN SMFECINPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECINPSP,ISO)
			END AS SMFECINPSP_C,
			SMFECINPSP,
			CASE  
				WHEN SMFECTEPSP IS NULL THEN ''
				WHEN SMFECTEPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECTEPSP,ISO)
			END AS SMFECTEPSP_C,
			SMFECTEPSP,
			TRIM(IFNULL(SMNUMDIAPA,0)) as SMNUMDIAPA,
			TRIM(IFNULL(SMTIPOPAGO,0)) as SMTIPOPAGO,
			TRIM(IFNULL(SMDFL44_78,0)) as SMDFL44_78,
			TRIM(IFNULL(SMMONTPAGO,0)) as SMMONTPAGO,
			TRIM(IFNULL(SMTIPOEMIS,'')) as SMTIPOEMIS,
			TRIM(IFNULL(SMMESNOMIN,'')) as SMMESNOMIN,
			TRIM(IFNULL(SMMODPAGO,0)) as SMMODPAGO,
			TRIM(IFNULL(SMSERIEDOC,'')) as SMSERIEDOC,
			TRIM(IFNULL(SMNUMDOC,'')) as SMNUMDOC,
			CASE  
				WHEN SMFECEMDOC IS NULL THEN ''
				WHEN SMFECEMDOC = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECEMDOC,ISO)
			END AS SMFECEMDOC_C,
			SMFECEMDOC,
			TRIM(IFNULL(SMMONTODOC,0)) as SMMONTODOC,
			TRIM(IFNULL(SMCODBANCO,'')) as SMCODBANCO,
			TRIM(IFNULL(SMCTA_CTE,'')) as SMCTA_CTE,
			TRIM(IFNULL(SMCAUSAEMI,0)) as SMCAUSAEMI,
			TRIM(IFNULL(SMDIACOTPA,0)) as SMDIACOTPA,
			TRIM(IFNULL(SMMONREIMP,0)) as SMMONREIMP,
			TRIM(IFNULL(SMMONTOFP,0)) as SMMONTOFP,
			TRIM(IFNULL(SMMONSALUD,0)) as SMMONSALUD,
			TRIM(IFNULL(SMMONSALAD,0)) as SMMONSALAD,
			TRIM(IFNULL(SMMONDESAH,0)) as SMMONDESAH,
			TRIM(IFNULL(SMMONCOTFU,0)) as SMMONCOTFU,
			TRIM(IFNULL(SMMONCOTSC,0)) as SMMONCOTSC,
			TRIM(IFNULL(SMENTPREVI,0)) as SMENTPREVI,
			TRIM(IFNULL(SMTRASPASO,0)) as SMTRASPASO,
			TRIM(IFNULL(SMSUBSINIC,0)) as SMSUBSINIC,
			TRIM(IFNULL(SMINDCONVE,0)) as SMINDCONVE,
			TRIM(IFNULL(SERV_SALUD,0)) as SERV_SALUD 
		from SIMATDTA.SMF03 where SM_ID &gt;= #keyInicio# and SM_ID &lt;= #keyFin#
	</select>
	
	<select id="getSubsParentalByRutBenef" resultMap="resultSubsParentalVO">
		select
			SM_ID,
			TRIM(IFNULL(SMMESINFO,'')) as SMMESINFO,
			TRIM(IFNULL(SMCODENTID,0)) as SMCODENTID,
			TRIM(IFNULL(SMAGEENTID,'')) as SMAGEENTID,
			TRIM(IFNULL(SMRUTEMPLE,'')) as SMRUTEMPLE,
			TRIM(IFNULL(SMNOMEMPLE,'')) as SMNOMEMPLE,
			TRIM(IFNULL(SMRUNBENPA,'')) as SMRUNBENPA,
			TRIM(IFNULL(SMNOMBENPA,'')) as SMNOMBENPA,
			TRIM(IFNULL(SMEDAD,0)) as SMEDAD,
			TRIM(IFNULL(SMSEXO,'')) as SMSEXO,
			TRIM(IFNULL(SMCALITRAB,0)) as SMCALITRAB,
			TRIM(IFNULL(SMACLABTRA,'')) as SMACLABTRA,
			TRIM(IFNULL(SMCODCOBEN,'')) as SMCODCOBEN,
			TRIM(IFNULL(SMRUNBENEF,'')) as SMRUNBENEF,
			TRIM(IFNULL(SMNOMBENPO,'')) as SMNOMBENPO,
			TRIM(IFNULL(SMNROLICEN,'')) as SMNROLICEN,
			TRIM(IFNULL(SMVINBEMEN,0)) as SMVINBEMEN,
			TRIM(IFNULL(SMNRORESOL,'')) as SMNRORESOL,
			TRIM(IFNULL(SMEXTPOSPA,0)) as SMEXTPOSPA,
			CASE  
				WHEN SMFECINPSP IS NULL THEN ''
				WHEN SMFECINPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECINPSP,ISO)
			END AS SMFECINPSP_C,
			SMFECINPSP,
			CASE  
				WHEN SMFECTEPSP IS NULL THEN ''
				WHEN SMFECTEPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECTEPSP,ISO)
			END AS SMFECTEPSP_C,
			SMFECTEPSP,
			TRIM(IFNULL(SMNUMDIAPA,0)) as SMNUMDIAPA,
			TRIM(IFNULL(SMTIPOPAGO,0)) as SMTIPOPAGO,
			TRIM(IFNULL(SMDFL44_78,0)) as SMDFL44_78,
			TRIM(IFNULL(SMMONTPAGO,0)) as SMMONTPAGO,
			TRIM(IFNULL(SMTIPOEMIS,'')) as SMTIPOEMIS,
			TRIM(IFNULL(SMMESNOMIN,'')) as SMMESNOMIN,
			TRIM(IFNULL(SMMODPAGO,0)) as SMMODPAGO,
			TRIM(IFNULL(SMSERIEDOC,'')) as SMSERIEDOC,
			TRIM(IFNULL(SMNUMDOC,'')) as SMNUMDOC,
			CASE  
				WHEN SMFECEMDOC IS NULL THEN ''
				WHEN SMFECEMDOC = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECEMDOC,ISO)
			END AS SMFECEMDOC_C,
			SMFECEMDOC,
			TRIM(IFNULL(SMMONTODOC,0)) as SMMONTODOC,
			TRIM(IFNULL(SMCODBANCO,'')) as SMCODBANCO,
			TRIM(IFNULL(SMCTA_CTE,'')) as SMCTA_CTE,
			TRIM(IFNULL(SMCAUSAEMI,0)) as SMCAUSAEMI,
			TRIM(IFNULL(SMDIACOTPA,0)) as SMDIACOTPA,
			TRIM(IFNULL(SMMONREIMP,0)) as SMMONREIMP,
			TRIM(IFNULL(SMMONTOFP,0)) as SMMONTOFP,
			TRIM(IFNULL(SMMONSALUD,0)) as SMMONSALUD,
			TRIM(IFNULL(SMMONSALAD,0)) as SMMONSALAD,
			TRIM(IFNULL(SMMONDESAH,0)) as SMMONDESAH,
			TRIM(IFNULL(SMMONCOTFU,0)) as SMMONCOTFU,
			TRIM(IFNULL(SMMONCOTSC,0)) as SMMONCOTSC,
			TRIM(IFNULL(SMENTPREVI,0)) as SMENTPREVI,
			TRIM(IFNULL(SMTRASPASO,0)) as SMTRASPASO,
			TRIM(IFNULL(SMSUBSINIC,0)) as SMSUBSINIC,
			TRIM(IFNULL(SMINDCONVE,0)) as SMINDCONVE,
			TRIM(IFNULL(SERV_SALUD,0)) as SERV_SALUD 
		from SIMATDTA.SMF03 
		WHERE TRIM(SMRUNBENPA) = #run_beneficiario_parental#
	</select>
	
	<select id="getSubsParentalByNumDoc" resultMap="resultSubsParentalVO">
		select
			 SM_ID,
			TRIM(IFNULL(SMMESINFO,'')) as SMMESINFO,
			TRIM(IFNULL(SMCODENTID,0)) as SMCODENTID,
			TRIM(IFNULL(SMAGEENTID,'')) as SMAGEENTID,
			TRIM(IFNULL(SMRUTEMPLE,'')) as SMRUTEMPLE,
			TRIM(IFNULL(SMNOMEMPLE,'')) as SMNOMEMPLE,
			TRIM(IFNULL(SMRUNBENPA,'')) as SMRUNBENPA,
			TRIM(IFNULL(SMNOMBENPA,'')) as SMNOMBENPA,
			TRIM(IFNULL(SMEDAD,0)) as SMEDAD,
			TRIM(IFNULL(SMSEXO,'')) as SMSEXO,
			TRIM(IFNULL(SMCALITRAB,0)) as SMCALITRAB,
			TRIM(IFNULL(SMACLABTRA,'')) as SMACLABTRA,
			TRIM(IFNULL(SMCODCOBEN,'')) as SMCODCOBEN,
			TRIM(IFNULL(SMRUNBENEF,'')) as SMRUNBENEF,
			TRIM(IFNULL(SMNOMBENPO,'')) as SMNOMBENPO,
			TRIM(IFNULL(SMNROLICEN,'')) as SMNROLICEN,
			TRIM(IFNULL(SMVINBEMEN,0)) as SMVINBEMEN,
			TRIM(IFNULL(SMNRORESOL,'')) as SMNRORESOL,
			TRIM(IFNULL(SMEXTPOSPA,0)) as SMEXTPOSPA,
			CASE  
				WHEN SMFECINPSP IS NULL THEN ''
				WHEN SMFECINPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECINPSP,ISO)
			END AS SMFECINPSP_C,
			SMFECINPSP,
			CASE  
				WHEN SMFECTEPSP IS NULL THEN ''
				WHEN SMFECTEPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECTEPSP,ISO)
			END AS SMFECTEPSP_C,
			SMFECTEPSP,
			TRIM(IFNULL(SMNUMDIAPA,0)) as SMNUMDIAPA,
			TRIM(IFNULL(SMTIPOPAGO,0)) as SMTIPOPAGO,
			TRIM(IFNULL(SMDFL44_78,0)) as SMDFL44_78,
			TRIM(IFNULL(SMMONTPAGO,0)) as SMMONTPAGO,
			TRIM(IFNULL(SMTIPOEMIS,'')) as SMTIPOEMIS,
			TRIM(IFNULL(SMMESNOMIN,'')) as SMMESNOMIN,
			TRIM(IFNULL(SMMODPAGO,0)) as SMMODPAGO,
			TRIM(IFNULL(SMSERIEDOC,'')) as SMSERIEDOC,
			TRIM(IFNULL(SMNUMDOC,'')) as SMNUMDOC,
			CASE  
				WHEN SMFECEMDOC IS NULL THEN ''
				WHEN SMFECEMDOC = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECEMDOC,ISO)
			END AS SMFECEMDOC_C,
			SMFECEMDOC,
			TRIM(IFNULL(SMMONTODOC,0)) as SMMONTODOC,
			TRIM(IFNULL(SMCODBANCO,'')) as SMCODBANCO,
			TRIM(IFNULL(SMCTA_CTE,'')) as SMCTA_CTE,
			TRIM(IFNULL(SMCAUSAEMI,0)) as SMCAUSAEMI,
			TRIM(IFNULL(SMDIACOTPA,0)) as SMDIACOTPA,
			TRIM(IFNULL(SMMONREIMP,0)) as SMMONREIMP,
			TRIM(IFNULL(SMMONTOFP,0)) as SMMONTOFP,
			TRIM(IFNULL(SMMONSALUD,0)) as SMMONSALUD,
			TRIM(IFNULL(SMMONSALAD,0)) as SMMONSALAD,
			TRIM(IFNULL(SMMONDESAH,0)) as SMMONDESAH,
			TRIM(IFNULL(SMMONCOTFU,0)) as SMMONCOTFU,
			TRIM(IFNULL(SMMONCOTSC,0)) as SMMONCOTSC,
			TRIM(IFNULL(SMENTPREVI,0)) as SMENTPREVI,
			TRIM(IFNULL(SMTRASPASO,0)) as SMTRASPASO,
			TRIM(IFNULL(SMSUBSINIC,0)) as SMSUBSINIC,
			TRIM(IFNULL(SMINDCONVE,0)) as SMINDCONVE,
			TRIM(IFNULL(SERV_SALUD,0)) as SERV_SALUD 
		from SIMATDTA.SMF03 WHERE TRIM(SMNUMDOC)=#num_documento#	 
	</select>

	<select id="getList_avanzar_SMF03" resultMap="resultSubsParentalVO">
		select
			 SM_ID,
			TRIM(IFNULL(SMMESINFO,'')) as SMMESINFO,
			TRIM(IFNULL(SMCODENTID,0)) as SMCODENTID,
			TRIM(IFNULL(SMAGEENTID,'')) as SMAGEENTID,
			TRIM(IFNULL(SMRUTEMPLE,'')) as SMRUTEMPLE,
			TRIM(IFNULL(SMNOMEMPLE,'')) as SMNOMEMPLE,
			TRIM(IFNULL(SMRUNBENPA,'')) as SMRUNBENPA,
			TRIM(IFNULL(SMNOMBENPA,'')) as SMNOMBENPA,
			TRIM(IFNULL(SMEDAD,0)) as SMEDAD,
			TRIM(IFNULL(SMSEXO,'')) as SMSEXO,
			TRIM(IFNULL(SMCALITRAB,0)) as SMCALITRAB,
			TRIM(IFNULL(SMACLABTRA,'')) as SMACLABTRA,
			TRIM(IFNULL(SMCODCOBEN,'')) as SMCODCOBEN,
			TRIM(IFNULL(SMRUNBENEF,'')) as SMRUNBENEF,
			TRIM(IFNULL(SMNOMBENPO,'')) as SMNOMBENPO,
			TRIM(IFNULL(SMNROLICEN,'')) as SMNROLICEN,
			TRIM(IFNULL(SMVINBEMEN,0)) as SMVINBEMEN,
			TRIM(IFNULL(SMNRORESOL,'')) as SMNRORESOL,
			TRIM(IFNULL(SMEXTPOSPA,0)) as SMEXTPOSPA,
			CASE  
				WHEN SMFECINPSP IS NULL THEN ''
				WHEN SMFECINPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECINPSP,ISO)
			END AS SMFECINPSP_C,
			SMFECINPSP,
			CASE  
				WHEN SMFECTEPSP IS NULL THEN ''
				WHEN SMFECTEPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECTEPSP,ISO)
			END AS SMFECTEPSP_C,
			SMFECTEPSP,
			TRIM(IFNULL(SMNUMDIAPA,0)) as SMNUMDIAPA,
			TRIM(IFNULL(SMTIPOPAGO,0)) as SMTIPOPAGO,
			TRIM(IFNULL(SMDFL44_78,0)) as SMDFL44_78,
			TRIM(IFNULL(SMMONTPAGO,0)) as SMMONTPAGO,
			TRIM(IFNULL(SMTIPOEMIS,'')) as SMTIPOEMIS,
			TRIM(IFNULL(SMMESNOMIN,'')) as SMMESNOMIN,
			TRIM(IFNULL(SMMODPAGO,0)) as SMMODPAGO,
			TRIM(IFNULL(SMSERIEDOC,'')) as SMSERIEDOC,
			TRIM(IFNULL(SMNUMDOC,'')) as SMNUMDOC,
			CASE  
				WHEN SMFECEMDOC IS NULL THEN ''
				WHEN SMFECEMDOC = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECEMDOC,ISO)
			END AS SMFECEMDOC_C,
			SMFECEMDOC,
			TRIM(IFNULL(SMMONTODOC,0)) as SMMONTODOC,
			TRIM(IFNULL(SMCODBANCO,'')) as SMCODBANCO,
			TRIM(IFNULL(SMCTA_CTE,'')) as SMCTA_CTE,
			TRIM(IFNULL(SMCAUSAEMI,0)) as SMCAUSAEMI,
			TRIM(IFNULL(SMDIACOTPA,0)) as SMDIACOTPA,
			TRIM(IFNULL(SMMONREIMP,0)) as SMMONREIMP,
			TRIM(IFNULL(SMMONTOFP,0)) as SMMONTOFP,
			TRIM(IFNULL(SMMONSALUD,0)) as SMMONSALUD,
			TRIM(IFNULL(SMMONSALAD,0)) as SMMONSALAD,
			TRIM(IFNULL(SMMONDESAH,0)) as SMMONDESAH,
			TRIM(IFNULL(SMMONCOTFU,0)) as SMMONCOTFU,
			TRIM(IFNULL(SMMONCOTSC,0)) as SMMONCOTSC,
			TRIM(IFNULL(SMENTPREVI,0)) as SMENTPREVI,
			TRIM(IFNULL(SMTRASPASO,0)) as SMTRASPASO,
			TRIM(IFNULL(SMSUBSINIC,0)) as SMSUBSINIC,
			TRIM(IFNULL(SMINDCONVE,0)) as SMINDCONVE,
			TRIM(IFNULL(SERV_SALUD,0)) as SERV_SALUD 
		from SIMATDTA.SMF03 where SM_ID &gt;= #keyFin# order by SM_ID FETCH FIRST $paginacion$ ROWS ONLY
	</select>
	
	<select id="getList_retroceder_SMF03" resultMap="resultSubsParentalVO">
		select
			 SM_ID,
			TRIM(IFNULL(SMMESINFO,'')) as SMMESINFO,
			TRIM(IFNULL(SMCODENTID,0)) as SMCODENTID,
			TRIM(IFNULL(SMAGEENTID,'')) as SMAGEENTID,
			TRIM(IFNULL(SMRUTEMPLE,'')) as SMRUTEMPLE,
			TRIM(IFNULL(SMNOMEMPLE,'')) as SMNOMEMPLE,
			TRIM(IFNULL(SMRUNBENPA,'')) as SMRUNBENPA,
			TRIM(IFNULL(SMNOMBENPA,'')) as SMNOMBENPA,
			TRIM(IFNULL(SMEDAD,0)) as SMEDAD,
			TRIM(IFNULL(SMSEXO,'')) as SMSEXO,
			TRIM(IFNULL(SMCALITRAB,0)) as SMCALITRAB,
			TRIM(IFNULL(SMACLABTRA,'')) as SMACLABTRA,
			TRIM(IFNULL(SMCODCOBEN,'')) as SMCODCOBEN,
			TRIM(IFNULL(SMRUNBENEF,'')) as SMRUNBENEF,
			TRIM(IFNULL(SMNOMBENPO,'')) as SMNOMBENPO,
			TRIM(IFNULL(SMNROLICEN,'')) as SMNROLICEN,
			TRIM(IFNULL(SMVINBEMEN,0)) as SMVINBEMEN,
			TRIM(IFNULL(SMNRORESOL,'')) as SMNRORESOL,
			TRIM(IFNULL(SMEXTPOSPA,0)) as SMEXTPOSPA,
			CASE  
				WHEN SMFECINPSP IS NULL THEN ''
				WHEN SMFECINPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECINPSP,ISO)
			END AS SMFECINPSP_C,
			SMFECINPSP,
			CASE  
				WHEN SMFECTEPSP IS NULL THEN ''
				WHEN SMFECTEPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECTEPSP,ISO)
			END AS SMFECTEPSP_C,
			SMFECTEPSP,
			TRIM(IFNULL(SMNUMDIAPA,0)) as SMNUMDIAPA,
			TRIM(IFNULL(SMTIPOPAGO,0)) as SMTIPOPAGO,
			TRIM(IFNULL(SMDFL44_78,0)) as SMDFL44_78,
			TRIM(IFNULL(SMMONTPAGO,0)) as SMMONTPAGO,
			TRIM(IFNULL(SMTIPOEMIS,'')) as SMTIPOEMIS,
			TRIM(IFNULL(SMMESNOMIN,'')) as SMMESNOMIN,
			TRIM(IFNULL(SMMODPAGO,0)) as SMMODPAGO,
			TRIM(IFNULL(SMSERIEDOC,'')) as SMSERIEDOC,
			TRIM(IFNULL(SMNUMDOC,'')) as SMNUMDOC,
			CASE  
				WHEN SMFECEMDOC IS NULL THEN ''
				WHEN SMFECEMDOC = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECEMDOC,ISO)
			END AS SMFECEMDOC_C,
			SMFECEMDOC,
			TRIM(IFNULL(SMMONTODOC,0)) as SMMONTODOC,
			TRIM(IFNULL(SMCODBANCO,'')) as SMCODBANCO,
			TRIM(IFNULL(SMCTA_CTE,'')) as SMCTA_CTE,
			TRIM(IFNULL(SMCAUSAEMI,0)) as SMCAUSAEMI,
			TRIM(IFNULL(SMDIACOTPA,0)) as SMDIACOTPA,
			TRIM(IFNULL(SMMONREIMP,0)) as SMMONREIMP,
			TRIM(IFNULL(SMMONTOFP,0)) as SMMONTOFP,
			TRIM(IFNULL(SMMONSALUD,0)) as SMMONSALUD,
			TRIM(IFNULL(SMMONSALAD,0)) as SMMONSALAD,
			TRIM(IFNULL(SMMONDESAH,0)) as SMMONDESAH,
			TRIM(IFNULL(SMMONCOTFU,0)) as SMMONCOTFU,
			TRIM(IFNULL(SMMONCOTSC,0)) as SMMONCOTSC,
			TRIM(IFNULL(SMENTPREVI,0)) as SMENTPREVI,
			TRIM(IFNULL(SMTRASPASO,0)) as SMTRASPASO,
			TRIM(IFNULL(SMSUBSINIC,0)) as SMSUBSINIC,
			TRIM(IFNULL(SMINDCONVE,0)) as SMINDCONVE,
			TRIM(IFNULL(SERV_SALUD,0)) as SERV_SALUD 
		from SIMATDTA.SMF03 where SM_ID &gt;= #keyInicio# order by SM_ID FETCH FIRST $paginacion$ ROWS ONLY
	</select>
	
	<select id="getTodoSubsParentalIbatis" resultMap="resultSubsParentalVO">
		select
			 SM_ID,
			TRIM(IFNULL(SMMESINFO,'')) as SMMESINFO,
			TRIM(IFNULL(SMCODENTID,0)) as SMCODENTID,
			TRIM(IFNULL(SMAGEENTID,'')) as SMAGEENTID,
			TRIM(IFNULL(SMRUTEMPLE,'')) as SMRUTEMPLE,
			TRIM(IFNULL(SMNOMEMPLE,'')) as SMNOMEMPLE,
			TRIM(IFNULL(SMRUNBENPA,'')) as SMRUNBENPA,
			TRIM(IFNULL(SMNOMBENPA,'')) as SMNOMBENPA,
			TRIM(IFNULL(SMEDAD,0)) as SMEDAD,
			TRIM(IFNULL(SMSEXO,'')) as SMSEXO,
			TRIM(IFNULL(SMCALITRAB,0)) as SMCALITRAB,
			TRIM(IFNULL(SMACLABTRA,'')) as SMACLABTRA,
			TRIM(IFNULL(SMCODCOBEN,'')) as SMCODCOBEN,
			TRIM(IFNULL(SMRUNBENEF,'')) as SMRUNBENEF,
			TRIM(IFNULL(SMNOMBENPO,'')) as SMNOMBENPO,
			TRIM(IFNULL(SMNROLICEN,'')) as SMNROLICEN,
			TRIM(IFNULL(SMVINBEMEN,0)) as SMVINBEMEN,
			TRIM(IFNULL(SMNRORESOL,'')) as SMNRORESOL,
			TRIM(IFNULL(SMEXTPOSPA,0)) as SMEXTPOSPA,
			CASE  
				WHEN SMFECINPSP IS NULL THEN ''
				WHEN SMFECINPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECINPSP,ISO)
			END AS SMFECINPSP_C,
			SMFECINPSP,
			CASE  
				WHEN SMFECTEPSP IS NULL THEN ''
				WHEN SMFECTEPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECTEPSP,ISO)
			END AS SMFECTEPSP_C,
			SMFECTEPSP,
			TRIM(IFNULL(SMNUMDIAPA,0)) as SMNUMDIAPA,
			TRIM(IFNULL(SMTIPOPAGO,0)) as SMTIPOPAGO,
			TRIM(IFNULL(SMDFL44_78,0)) as SMDFL44_78,
			TRIM(IFNULL(SMMONTPAGO,0)) as SMMONTPAGO,
			TRIM(IFNULL(SMTIPOEMIS,'')) as SMTIPOEMIS,
			TRIM(IFNULL(SMMESNOMIN,'')) as SMMESNOMIN,
			TRIM(IFNULL(SMMODPAGO,0)) as SMMODPAGO,
			TRIM(IFNULL(SMSERIEDOC,'')) as SMSERIEDOC,
			TRIM(IFNULL(SMNUMDOC,'')) as SMNUMDOC,
			CASE  
				WHEN SMFECEMDOC IS NULL THEN ''
				WHEN SMFECEMDOC = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECEMDOC,ISO)
			END AS SMFECEMDOC_C,
			SMFECEMDOC,
			TRIM(IFNULL(SMMONTODOC,0)) as SMMONTODOC,
			TRIM(IFNULL(SMCODBANCO,'')) as SMCODBANCO,
			TRIM(IFNULL(SMCTA_CTE,'')) as SMCTA_CTE,
			TRIM(IFNULL(SMCAUSAEMI,0)) as SMCAUSAEMI,
			TRIM(IFNULL(SMDIACOTPA,0)) as SMDIACOTPA,
			TRIM(IFNULL(SMMONREIMP,0)) as SMMONREIMP,
			TRIM(IFNULL(SMMONTOFP,0)) as SMMONTOFP,
			TRIM(IFNULL(SMMONSALUD,0)) as SMMONSALUD,
			TRIM(IFNULL(SMMONSALAD,0)) as SMMONSALAD,
			TRIM(IFNULL(SMMONDESAH,0)) as SMMONDESAH,
			TRIM(IFNULL(SMMONCOTFU,0)) as SMMONCOTFU,
			TRIM(IFNULL(SMMONCOTSC,0)) as SMMONCOTSC,
			TRIM(IFNULL(SMENTPREVI,0)) as SMENTPREVI,
			TRIM(IFNULL(SMTRASPASO,0)) as SMTRASPASO,
			TRIM(IFNULL(SMSUBSINIC,0)) as SMSUBSINIC,
			TRIM(IFNULL(SMINDCONVE,0)) as SMINDCONVE,
			TRIM(IFNULL(SERV_SALUD,0)) as SERV_SALUD 
		from SIMATDTA.SMF03		
	</select>
	
	<select id="getUnoSubsParentalIbatis" resultMap="resultSubsParentalVO">
		select 
			SM_ID,
			TRIM(IFNULL(SMMESINFO,'')) as SMMESINFO,
			TRIM(IFNULL(SMCODENTID,0)) as SMCODENTID,
			TRIM(IFNULL(SMAGEENTID,'')) as SMAGEENTID,
			TRIM(IFNULL(SMRUTEMPLE,'')) as SMRUTEMPLE,
			TRIM(IFNULL(SMNOMEMPLE,'')) as SMNOMEMPLE,
			TRIM(IFNULL(SMRUNBENPA,'')) as SMRUNBENPA,
			TRIM(IFNULL(SMNOMBENPA,'')) as SMNOMBENPA,
			TRIM(IFNULL(SMEDAD,0)) as SMEDAD,
			TRIM(IFNULL(SMSEXO,'')) as SMSEXO,
			TRIM(IFNULL(SMCALITRAB,0)) as SMCALITRAB,
			TRIM(IFNULL(SMACLABTRA,'')) as SMACLABTRA,
			TRIM(IFNULL(SMCODCOBEN,'')) as SMCODCOBEN,
			TRIM(IFNULL(SMRUNBENEF,'')) as SMRUNBENEF,
			TRIM(IFNULL(SMNOMBENPO,'')) as SMNOMBENPO,
			TRIM(IFNULL(SMNROLICEN,'')) as SMNROLICEN,
			TRIM(IFNULL(SMVINBEMEN,0)) as SMVINBEMEN,
			TRIM(IFNULL(SMNRORESOL,'')) as SMNRORESOL,
			TRIM(IFNULL(SMEXTPOSPA,0)) as SMEXTPOSPA,
			CASE  
				WHEN SMFECINPSP IS NULL THEN ''
				WHEN SMFECINPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECINPSP,ISO)
			END AS SMFECINPSP_C,
			SMFECINPSP,
			CASE  
				WHEN SMFECTEPSP IS NULL THEN ''
				WHEN SMFECTEPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECTEPSP,ISO)
			END AS SMFECTEPSP_C,
			SMFECTEPSP,
			TRIM(IFNULL(SMNUMDIAPA,0)) as SMNUMDIAPA,
			TRIM(IFNULL(SMTIPOPAGO,0)) as SMTIPOPAGO,
			TRIM(IFNULL(SMDFL44_78,0)) as SMDFL44_78,
			TRIM(IFNULL(SMMONTPAGO,0)) as SMMONTPAGO,
			TRIM(IFNULL(SMTIPOEMIS,'')) as SMTIPOEMIS,
			TRIM(IFNULL(SMMESNOMIN,'')) as SMMESNOMIN,
			TRIM(IFNULL(SMMODPAGO,0)) as SMMODPAGO,
			TRIM(IFNULL(SMSERIEDOC,'')) as SMSERIEDOC,
			TRIM(IFNULL(SMNUMDOC,'')) as SMNUMDOC,
			CASE  
				WHEN SMFECEMDOC IS NULL THEN ''
				WHEN SMFECEMDOC = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECEMDOC,ISO)
			END AS SMFECEMDOC_C,
			SMFECEMDOC,
			TRIM(IFNULL(SMMONTODOC,0)) as SMMONTODOC,
			TRIM(IFNULL(SMCODBANCO,'')) as SMCODBANCO,
			TRIM(IFNULL(SMCTA_CTE,'')) as SMCTA_CTE,
			TRIM(IFNULL(SMCAUSAEMI,0)) as SMCAUSAEMI,
			TRIM(IFNULL(SMDIACOTPA,0)) as SMDIACOTPA,
			TRIM(IFNULL(SMMONREIMP,0)) as SMMONREIMP,
			TRIM(IFNULL(SMMONTOFP,0)) as SMMONTOFP,
			TRIM(IFNULL(SMMONSALUD,0)) as SMMONSALUD,
			TRIM(IFNULL(SMMONSALAD,0)) as SMMONSALAD,
			TRIM(IFNULL(SMMONDESAH,0)) as SMMONDESAH,
			TRIM(IFNULL(SMMONCOTFU,0)) as SMMONCOTFU,
			TRIM(IFNULL(SMMONCOTSC,0)) as SMMONCOTSC,
			TRIM(IFNULL(SMENTPREVI,0)) as SMENTPREVI,
			TRIM(IFNULL(SMTRASPASO,0)) as SMTRASPASO,
			TRIM(IFNULL(SMSUBSINIC,0)) as SMSUBSINIC,
			TRIM(IFNULL(SMINDCONVE,0)) as SMINDCONVE,
			TRIM(IFNULL(SERV_SALUD,0)) as SERV_SALUD
		from  SIMATDTA.SMF03 WHERE SM_ID=#idParental#		
	</select>
		
	<select id="getSubsParentalIbatisByMes" resultMap="resultSubsParentalVO">
		select 
			SM_ID,
			TRIM(IFNULL(SMMESINFO,'')) as SMMESINFO,
			TRIM(IFNULL(SMCODENTID,0)) as SMCODENTID,
			TRIM(IFNULL(SMAGEENTID,'')) as SMAGEENTID,
			TRIM(IFNULL(SMRUTEMPLE,'')) as SMRUTEMPLE,
			TRIM(IFNULL(SMNOMEMPLE,'')) as SMNOMEMPLE,
			TRIM(IFNULL(SMRUNBENPA,'')) as SMRUNBENPA,
			TRIM(IFNULL(SMNOMBENPA,'')) as SMNOMBENPA,
			TRIM(IFNULL(SMEDAD,0)) as SMEDAD,
			TRIM(IFNULL(SMSEXO,'')) as SMSEXO,
			TRIM(IFNULL(SMCALITRAB,0)) as SMCALITRAB,
			TRIM(IFNULL(SMACLABTRA,'')) as SMACLABTRA,
			TRIM(IFNULL(SMCODCOBEN,'')) as SMCODCOBEN,
			TRIM(IFNULL(SMRUNBENEF,'')) as SMRUNBENEF,
			TRIM(IFNULL(SMNOMBENPO,'')) as SMNOMBENPO,
			TRIM(IFNULL(SMNROLICEN,'')) as SMNROLICEN,
			TRIM(IFNULL(SMVINBEMEN,0)) as SMVINBEMEN,
			TRIM(IFNULL(SMNRORESOL,'')) as SMNRORESOL,
			TRIM(IFNULL(SMEXTPOSPA,0)) as SMEXTPOSPA,
			CASE  
				WHEN SMFECINPSP IS NULL THEN ''
				WHEN SMFECINPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECINPSP,ISO)
			END AS SMFECINPSP_C,
			SMFECINPSP,
			CASE  
				WHEN SMFECTEPSP IS NULL THEN ''
				WHEN SMFECTEPSP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECTEPSP,ISO)
			END AS SMFECTEPSP_C,
			SMFECTEPSP,
			TRIM(IFNULL(SMNUMDIAPA,0)) as SMNUMDIAPA,
			TRIM(IFNULL(SMTIPOPAGO,0)) as SMTIPOPAGO,
			TRIM(IFNULL(SMDFL44_78,0)) as SMDFL44_78,
			TRIM(IFNULL(SMMONTPAGO,0)) as SMMONTPAGO,
			TRIM(IFNULL(SMTIPOEMIS,'')) as SMTIPOEMIS,
			TRIM(IFNULL(SMMESNOMIN,'')) as SMMESNOMIN,
			TRIM(IFNULL(SMMODPAGO,0)) as SMMODPAGO,
			TRIM(IFNULL(SMSERIEDOC,'')) as SMSERIEDOC,
			TRIM(IFNULL(SMNUMDOC,'')) as SMNUMDOC,
			CASE  
				WHEN SMFECEMDOC IS NULL THEN ''
				WHEN SMFECEMDOC = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECEMDOC,ISO)
			END AS SMFECEMDOC_C,
			SMFECEMDOC,
			TRIM(IFNULL(SMMONTODOC,0)) as SMMONTODOC,
			TRIM(IFNULL(SMCODBANCO,'')) as SMCODBANCO,
			TRIM(IFNULL(SMCTA_CTE,'')) as SMCTA_CTE,
			TRIM(IFNULL(SMCAUSAEMI,0)) as SMCAUSAEMI,
			TRIM(IFNULL(SMDIACOTPA,0)) as SMDIACOTPA,
			TRIM(IFNULL(SMMONREIMP,0)) as SMMONREIMP,
			TRIM(IFNULL(SMMONTOFP,0)) as SMMONTOFP,
			TRIM(IFNULL(SMMONSALUD,0)) as SMMONSALUD,
			TRIM(IFNULL(SMMONSALAD,0)) as SMMONSALAD,
			TRIM(IFNULL(SMMONDESAH,0)) as SMMONDESAH,
			TRIM(IFNULL(SMMONCOTFU,0)) as SMMONCOTFU,
			TRIM(IFNULL(SMMONCOTSC,0)) as SMMONCOTSC,
			TRIM(IFNULL(SMENTPREVI,0)) as SMENTPREVI,
			TRIM(IFNULL(SMTRASPASO,0)) as SMTRASPASO,
			TRIM(IFNULL(SMSUBSINIC,0)) as SMSUBSINIC,
			TRIM(IFNULL(SMINDCONVE,0)) as SMINDCONVE,
			TRIM(IFNULL(SERV_SALUD,0)) as SERV_SALUD 
		from SIMATDTA.SMF03 where SMMESINFO=#mes_informacion#
		
	</select>
					
	<insert id="setSubsParentalIbatis" parameterClass="cl.laaraucana.simat.entidades.SubsParentalVO">
		INSERT INTO SIMATDTA.SMF03 (SM_ID,SMMESINFO,SMCODENTID,SMAGEENTID,SMRUTEMPLE,SMNOMEMPLE,SMRUNBENPA,SMNOMBENPA,SMEDAD,SMSEXO,SMCALITRAB,SMACLABTRA,SMCODCOBEN,SMRUNBENEF,SMNOMBENPO,SMNROLICEN,SMVINBEMEN,SMNRORESOL,SMEXTPOSPA,SMFECINPSP,SMFECTEPSP,SMNUMDIAPA,SMTIPOPAGO,SMDFL44_78,SMMONTPAGO,SMTIPOEMIS,SMMESNOMIN,SMMODPAGO,SMSERIEDOC,SMNUMDOC,SMFECEMDOC,SMMONTODOC,SMCODBANCO,SMCTA_CTE,SMCAUSAEMI,SMDIACOTPA,SMMONREIMP,SMMONTOFP,SMMONSALUD,SMMONSALAD,SMMONDESAH,SMMONCOTFU,SMMONCOTSC,SMENTPREVI,SMTRASPASO,SMSUBSINIC,SMINDCONVE,SERV_SALUD)
		VALUES (IFNULL((select max(SM_ID)+1 from SIMATDTA.SMF03),0),#mes_informacion#,#codigo_entidad#,#agencia_entidad#,#rut_empleador#,#nombre_empleador#,#run_beneficiario_parental#,#nombre_beneficiario_parental#,#edad#,#sexo#,#calidad_trabajador#,#actividad_laboral_trabajador#,#cod_comuna_beneficiario#,#run_beneficiario_postnatal#,#nombre_beneficiario_postnatal#,#nro_licencia#,#vinculo_beneficiario_menor#,#nro_resolucion#,#tipo_extension_postnatal_parental#,#fecha_inicio_postnatal_parental#,#fecha_termino_postnatal_parental#,#num_dias_permiso_pagado#,#tipo_de_pago#,#monto_sub_dfl44_1978#,#monto_sub_pagado#,#tipo_emision#,#mes_nomina#,#mod_pago#,#serie_documento#,#num_documento#,#fecha_emision_documento#,#monto_documento#,#codigo_banco#,#cta_cte#,#causal_emision#,#num_dias_cotiz_pagados#,#monto_remun_imponible#,#monto_fp#,#monto_salud#,#monto_salud_ad#,#monto_desahucio#,#monto_cotiz_fu#,#monto_cotiz_sc#,#entidad_previsional#,#traspaso#,#subsidio_iniciado#,#indicador_convenio#,#serv_salud#)
		WITH NC 
	</insert>
	
	
	<update id="updateUnoSubsParentalIbatis">
		 UPDATE SIMATDTA.SMF03 SET 
			   SMMESINFO=#mes_informacion#,
			   SMCODENTID=#codigo_entidad#,
			   SMAGEENTID=#agencia_entidad#,
			   SMRUTEMPLE=#rut_empleador#,
			   SMNOMEMPLE=#nombre_empleador#,
			   SMRUNBENPA=#run_beneficiario_parental#,
			   SMNOMBENPA=#nombre_beneficiario_parental#,
			   SMEDAD=#edad#,
			   SMSEXO=#sexo#,
			   SMCALITRAB=#calidad_trabajador#,
			   SMACLABTRA=#actividad_laboral_trabajador#,
			   SMCODCOBEN=#cod_comuna_beneficiario#,
			   SMRUNBENEF=#run_beneficiario_postnatal#,
			   SMNOMBENPO=#nombre_beneficiario_postnatal#,
			   SMNROLICEN=#nro_licencia#,
			   SMVINBEMEN=#vinculo_beneficiario_menor#,
			   SMNRORESOL=#nro_resolucion#,
			   SMEXTPOSPA=#tipo_extension_postnatal_parental#,
			   SMFECINPSP=#fecha_inicio_postnatal_parental#,
			   SMFECTEPSP=#fecha_termino_postnatal_parental#,
			   SMNUMDIAPA=#num_dias_permiso_pagado#,
			   SMTIPOPAGO=#tipo_de_pago#,
			   SMDFL44_78=#monto_sub_dfl44_1978#,
			   SMMONTPAGO=#monto_sub_pagado#,
			   SMTIPOEMIS=#tipo_emision#,
			   SMMESNOMIN=#mes_nomina#,
			   SMMODPAGO=#mod_pago#,
			   SMSERIEDOC=#serie_documento#,
			   SMNUMDOC=#num_documento#,
			   SMFECEMDOC=#fecha_emision_documento#,
			   SMMONTODOC=#monto_documento#,
			   SMCODBANCO=#codigo_banco#,
			   SMCTA_CTE=#cta_cte#,
			   SMCAUSAEMI=#causal_emision#,
			   SMDIACOTPA=#num_dias_cotiz_pagados#,
			   SMMONREIMP=#monto_remun_imponible#,
			   SMMONTOFP=#monto_fp#,
			   SMMONSALUD=#monto_salud#,
			   SMMONSALAD=#monto_salud_ad#,
			   SMMONDESAH=#monto_desahucio#,
			   SMMONCOTFU=#monto_cotiz_fu#,
			   SMMONCOTSC=#monto_cotiz_sc#,
			   SMENTPREVI=#entidad_previsional#,
			   SMTRASPASO=#traspaso#,
			   SMSUBSINIC=#subsidio_iniciado#,
			   SMINDCONVE=#indicador_convenio#
			 WHERE SM_ID=#idParental#
			 WITH NC 
	</update>
	
	<delete id="delSubsParentalIbatis" parameterClass="cl.laaraucana.simat.entidades.SubsParentalVO">
		DELETE FROM SIMATDTA.SMF03 WHERE SM_ID=#idParental#
		WITH NC 
	</delete>	
</sqlMap>
