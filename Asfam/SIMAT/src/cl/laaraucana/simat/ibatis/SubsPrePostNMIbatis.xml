<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
    PUBLIC "-//iBATIS.com//DTD SQL Map Config 2.0//EN"
    "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap>
	<!-- SubsPrePostNMIbatis -->
	<resultMap id="resultSubsPrePostNMVO" class="cl.laaraucana.simat.entidades.SubsPrePostNMVO">
	
		<result property="id" column="SM_ID" />				
		<result property="mes_informacion" column="SMMESINFO" />
		<result property="codigo_entidad" column="SMCODENTID" />
		<result property="agencia_entidad" column="SMAGEENTID" />		
		<result property="rut_empleador" column="SMRUTEMPLE" />
		<result property="nombre_empleador" column="SMNOMEMPLE" />
		<result property="run_beneficiario" column="SMRUNBENEF" />		
		<result property="nombre_beneficiario" column="SMNOMBENEF" />
		<result property="nro_licencia" column="SMNROLICEN" />
		<result property="codigo_diagnostico" column="SMCODDIAGN" />		
		<result property="vinculo_beneficiario_menor" column="SMVINBEMEN" />
		
		<result property="actividad_laboral_trabajador" column="SMACLABTRA" />
		<result property="cod_comuna_beneficiario" column="SMCODCOBEN" />
		
		<result property="nro_resolucion" column="SMNRORESOL" />		
		<result property="extension_postnatal" column="SMEXTPOSTN" />
		<result property="nro_nacimientos" column="SMNRONACIM" />
		<result property="num_dias_licencia_autorizados" column="SMDIALICAU" />
		
		<result property="fecha_inicio_reposo" column="SMFECINREP" />
		<result property="fecha_inicio_reposo_Char" column="SMFECINREP_C"/>
		
		<result property="fecha_termino_reposo" column="SMFECTEREP" />
		<result property="fecha_termino_reposo_Char" column="SMFECTEREP_C"/>
		
		<result property="num_dias_sub_pagadados" column="SMNUMDIPAG" />
		<result property="tipo_de_pago" column="SMTIPOPAGO" />
		
		<result property="monto_sub_dfl44_1978" column="SMDFL44_78" />
		<result property="monto_sub_pagado" column="SMMONTPAGO" />
		<result property="tipo_emision" column="SMTIPOEMIS" />		
		<result property="mes_nomina" column="SMMESNOMIN" />
		<result property="mod_pago" column="SMMODPAGO" />
		<result property="serie_documento" column="SMSERIEDOC" />
		<result property="num_documento" column="SMNUMDOC" />
		<result property="fecha_emision_documento" column="SMFECEMDOC"/>
		
		<result property="fecha_emision_documento_Char" column="SMFECEMDOC_C"/>
		
		<result property="monto_documento" column="SMMONTODOC" />
		<result property="codigo_banco" column="SMCODBANCO" />
		
		<result property="cta_cte" column="SMCTA_CTE" />
		<result property="causal_emision" column="SMCAUSAEMI" />		
		<result property="num_dias_cotiz_pagados" column="SMDIACOTPA" />		
		<result property="monto_renum_imponible" column="SMMONREIMP" />
		<result property="monto_fp" column="SMMONTOFP" />
		<result property="monto_salud" column="SMMONSALUD" />
		<result property="monto_salud_ad" column="SMMONSALAD" />
		<result property="monto_desahucio" column="SMMONDESAH" />
		<result property="monto_cotiz_fu" column="SMMONCOTFU" />
		<result property="monto_cotiz_sc" column="SMMONCOTSC" />
		
		<result property="entidad_previsional" column="SMENTPREVI" />
		<result property="subsidio_iniciado" column="SMSUBSINIC" />
		<result property="indicador_convenio" column="SMINDCONVE" />
		
		<result property="serv_salud" column="SERV_SALUD" />
		<result property="monto_cot" column="MONTO_COT" />
		
		
	</resultMap>
	
	
	<select id="getTodoSubsPrePostNMIbatis" resultMap="resultSubsPrePostNMVO">
		SELECT 
			SM_ID,
			TRIM(IFNULL(SMMESINFO,'')) as SMMESINFO,
			TRIM(IFNULL(SMCODENTID,0)) as SMCODENTID,
			TRIM(IFNULL(SMAGEENTID,'')) as SMAGEENTID,
			TRIM(IFNULL(SMRUTEMPLE,'')) as SMRUTEMPLE,
			TRIM(IFNULL(SMNOMEMPLE,'')) as SMNOMEMPLE,
			TRIM(IFNULL(SMRUNBENEF,'')) as SMRUNBENEF,
			TRIM(IFNULL(SMNOMBENEF,'')) as SMNOMBENEF,
			TRIM(IFNULL(SMNROLICEN,'')) as SMNROLICEN,
			TRIM(IFNULL(SMCODDIAGN,'')) as SMCODDIAGN,
			TRIM(IFNULL(SMVINBEMEN,0)) as SMVINBEMEN,
			TRIM(IFNULL(SMACLABTRA,'')) as SMACLABTRA,
			TRIM(IFNULL(SMCODCOBEN,'')) as SMCODCOBEN,
			TRIM(IFNULL(SMNRORESOL,'')) as SMNRORESOL,
			TRIM(IFNULL(SMEXTPOSTN,0)) as SMEXTPOSTN,
			TRIM(IFNULL(SMNRONACIM,0)) as SMNRONACIM,
			TRIM(IFNULL(SMDIALICAU,0)) as SMDIALICAU,
			CASE  
				WHEN SMFECINREP IS NULL THEN ''
				WHEN SMFECINREP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECINREP,ISO)
			END AS SMFECINREP_C,
			SMFECINREP,
			CASE  
				WHEN SMFECTEREP IS NULL THEN ''
				WHEN SMFECTEREP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECTEREP,ISO)
			END AS SMFECTEREP_C,
			SMFECTEREP,
			TRIM(IFNULL(SMNUMDIPAG,0)) as SMNUMDIPAG,
			TRIM(IFNULL(SMTIPOPAGO,0)) as SMTIPOPAGO,
			TRIM(IFNULL(SMDFL44_78,0)) as SMDFL44_78,
			TRIM(IFNULL(SMMONTPAGO,0)) as SMMONTPAGO,
			TRIM(IFNULL(SMTIPOEMIS,'')) as SMTIPOEMIS,
			TRIM(IFNULL(SMMESNOMIN,'')) as SMMESNOMIN,
			TRIM(IFNULL(SMMODPAGO,0)) as SMMODPAGO,
			TRIM(IFNULL(SMSERIEDOC,'')) as SMSERIEDOC,
			TRIM(IFNULL(SMNUMDOC,'')) as SMNUMDOC,						
			CASE  
				WHEN SMFECEMDOC IS NULL THEN ''
				WHEN SMFECEMDOC = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECEMDOC,ISO)
			END AS SMFECEMDOC_C,
			SMFECEMDOC,
			TRIM(IFNULL(SMMONTODOC,0)) as SMMONTODOC,
			TRIM(IFNULL(SMCODBANCO,'')) as SMCODBANCO,
			TRIM(IFNULL(SMCTA_CTE,'')) as SMCTA_CTE,
			TRIM(IFNULL(SMCAUSAEMI,0)) as SMCAUSAEMI,
			TRIM(IFNULL(SMDIACOTPA,0)) as SMDIACOTPA,
			TRIM(IFNULL(SMMONREIMP,0)) as SMMONREIMP,
			TRIM(IFNULL(SMMONTOFP,0)) as SMMONTOFP,
			TRIM(IFNULL(SMMONSALUD,0)) as SMMONSALUD,
			TRIM(IFNULL(SMMONSALAD,0)) as SMMONSALAD,
			TRIM(IFNULL(SMMONDESAH,0)) as SMMONDESAH,
			TRIM(IFNULL(SMMONCOTFU,0)) as SMMONCOTFU,
			TRIM(IFNULL(SMMONCOTSC,0)) as SMMONCOTSC,
			TRIM(IFNULL(SMENTPREVI,0)) as SMENTPREVI,
			TRIM(IFNULL(SMSUBSINIC,0)) as SMSUBSINIC,
			TRIM(IFNULL(SMINDCONVE,0)) as SMINDCONVE,
			TRIM(IFNULL(SERV_SALUD,0)) as SERV_SALUD,
			TRIM(IFNULL(MONTO_COT,0)) as MONTO_COT
		FROM SIMATDTA.SMF02
	</select>
	
	<select id="getUnoSubsPrePostNMIbatis" resultMap="resultSubsPrePostNMVO">
		select 
			SM_ID,
			TRIM(IFNULL(SMMESINFO,'')) as SMMESINFO,
			TRIM(IFNULL(SMCODENTID,0)) as SMCODENTID,
			TRIM(IFNULL(SMAGEENTID,'')) as SMAGEENTID,
			TRIM(IFNULL(SMRUTEMPLE,'')) as SMRUTEMPLE,
			TRIM(IFNULL(SMNOMEMPLE,'')) as SMNOMEMPLE,
			TRIM(IFNULL(SMRUNBENEF,'')) as SMRUNBENEF,
			TRIM(IFNULL(SMNOMBENEF,'')) as SMNOMBENEF,
			TRIM(IFNULL(SMNROLICEN,'')) as SMNROLICEN,
			TRIM(IFNULL(SMCODDIAGN,'')) as SMCODDIAGN,
			TRIM(IFNULL(SMVINBEMEN,0)) as SMVINBEMEN,
			TRIM(IFNULL(SMACLABTRA,'')) as SMACLABTRA,
			TRIM(IFNULL(SMCODCOBEN,'')) as SMCODCOBEN,
			TRIM(IFNULL(SMNRORESOL,'')) as SMNRORESOL,
			TRIM(IFNULL(SMEXTPOSTN,0)) as SMEXTPOSTN,
			TRIM(IFNULL(SMNRONACIM,0)) as SMNRONACIM,
			TRIM(IFNULL(SMDIALICAU,0)) as SMDIALICAU,
			CASE  
				WHEN SMFECINREP IS NULL THEN ''
				WHEN SMFECINREP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECINREP,ISO)
			END AS SMFECINREP_C,
			SMFECINREP,
			CASE  
				WHEN SMFECTEREP IS NULL THEN ''
				WHEN SMFECTEREP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECTEREP,ISO)
			END AS SMFECTEREP_C,
			SMFECTEREP,
			TRIM(IFNULL(SMNUMDIPAG,0)) as SMNUMDIPAG,
			TRIM(IFNULL(SMTIPOPAGO,0)) as SMTIPOPAGO,
			TRIM(IFNULL(SMDFL44_78,0)) as SMDFL44_78,
			TRIM(IFNULL(SMMONTPAGO,0)) as SMMONTPAGO,
			TRIM(IFNULL(SMTIPOEMIS,'')) as SMTIPOEMIS,
			TRIM(IFNULL(SMMESNOMIN,'')) as SMMESNOMIN,
			TRIM(IFNULL(SMMODPAGO,0)) as SMMODPAGO,
			TRIM(IFNULL(SMSERIEDOC,'')) as SMSERIEDOC,
			TRIM(IFNULL(SMNUMDOC,'')) as SMNUMDOC,
			CASE  
				WHEN SMFECEMDOC IS NULL THEN ''
				WHEN SMFECEMDOC = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECEMDOC,ISO)
			END AS SMFECEMDOC_C,
			SMFECEMDOC,
			TRIM(IFNULL(SMMONTODOC,0)) as SMMONTODOC,
			TRIM(IFNULL(SMCODBANCO,'')) as SMCODBANCO,
			TRIM(IFNULL(SMCTA_CTE,'')) as SMCTA_CTE,
			TRIM(IFNULL(SMCAUSAEMI,0)) as SMCAUSAEMI,
			TRIM(IFNULL(SMDIACOTPA,0)) as SMDIACOTPA,
			TRIM(IFNULL(SMMONREIMP,0)) as SMMONREIMP,
			TRIM(IFNULL(SMMONTOFP,0)) as SMMONTOFP,
			TRIM(IFNULL(SMMONSALUD,0)) as SMMONSALUD,
			TRIM(IFNULL(SMMONSALAD,0)) as SMMONSALAD,
			TRIM(IFNULL(SMMONDESAH,0)) as SMMONDESAH,
			TRIM(IFNULL(SMMONCOTFU,0)) as SMMONCOTFU,
			TRIM(IFNULL(SMMONCOTSC,0)) as SMMONCOTSC,
			TRIM(IFNULL(SMENTPREVI,0)) as SMENTPREVI,
			TRIM(IFNULL(SMSUBSINIC,0)) as SMSUBSINIC,
			TRIM(IFNULL(SMINDCONVE,0)) as SMINDCONVE,
			TRIM(IFNULL(SERV_SALUD,0)) as SERV_SALUD,
			TRIM(IFNULL(MONTO_COT,0)) as MONTO_COT
		from SIMATDTA.SMF02 WHERE SM_ID=#id#
	</select>
	
	<select id="getSubsPrePostNMByRutBenef" resultMap="resultSubsPrePostNMVO">
		select 
			SM_ID,
			TRIM(IFNULL(SMMESINFO,'')) as SMMESINFO,
			TRIM(IFNULL(SMCODENTID,0)) as SMCODENTID,
			TRIM(IFNULL(SMAGEENTID,'')) as SMAGEENTID,
			TRIM(IFNULL(SMRUTEMPLE,'')) as SMRUTEMPLE,
			TRIM(IFNULL(SMNOMEMPLE,'')) as SMNOMEMPLE,
			TRIM(IFNULL(SMRUNBENEF,'')) as SMRUNBENEF,
			TRIM(IFNULL(SMNOMBENEF,'')) as SMNOMBENEF,
			TRIM(IFNULL(SMNROLICEN,'')) as SMNROLICEN,
			TRIM(IFNULL(SMCODDIAGN,'')) as SMCODDIAGN,
			TRIM(IFNULL(SMVINBEMEN,0)) as SMVINBEMEN,
			TRIM(IFNULL(SMACLABTRA,'')) as SMACLABTRA,
			TRIM(IFNULL(SMCODCOBEN,'')) as SMCODCOBEN,
			TRIM(IFNULL(SMNRORESOL,'')) as SMNRORESOL,
			TRIM(IFNULL(SMEXTPOSTN,0)) as SMEXTPOSTN,
			TRIM(IFNULL(SMNRONACIM,0)) as SMNRONACIM,
			TRIM(IFNULL(SMDIALICAU,0)) as SMDIALICAU,
			CASE  
				WHEN SMFECINREP IS NULL THEN ''
				WHEN SMFECINREP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECINREP,ISO)
			END AS SMFECINREP_C,
			SMFECINREP,
			CASE  
				WHEN SMFECTEREP IS NULL THEN ''
				WHEN SMFECTEREP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECTEREP,ISO)
			END AS SMFECTEREP_C,
			SMFECTEREP,
			TRIM(IFNULL(SMNUMDIPAG,0)) as SMNUMDIPAG,
			TRIM(IFNULL(SMTIPOPAGO,0)) as SMTIPOPAGO,
			TRIM(IFNULL(SMDFL44_78,0)) as SMDFL44_78,
			TRIM(IFNULL(SMMONTPAGO,0)) as SMMONTPAGO,
			TRIM(IFNULL(SMTIPOEMIS,'')) as SMTIPOEMIS,
			TRIM(IFNULL(SMMESNOMIN,'')) as SMMESNOMIN,
			TRIM(IFNULL(SMMODPAGO,0)) as SMMODPAGO,
			TRIM(IFNULL(SMSERIEDOC,'')) as SMSERIEDOC,
			TRIM(IFNULL(SMNUMDOC,'')) as SMNUMDOC,
			CASE  
				WHEN SMFECEMDOC IS NULL THEN ''
				WHEN SMFECEMDOC = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECEMDOC,ISO)
			END AS SMFECEMDOC_C,
			SMFECEMDOC,
			TRIM(IFNULL(SMMONTODOC,0)) as SMMONTODOC,
			TRIM(IFNULL(SMCODBANCO,'')) as SMCODBANCO,
			TRIM(IFNULL(SMCTA_CTE,'')) as SMCTA_CTE,
			TRIM(IFNULL(SMCAUSAEMI,0)) as SMCAUSAEMI,
			TRIM(IFNULL(SMDIACOTPA,0)) as SMDIACOTPA,
			TRIM(IFNULL(SMMONREIMP,0)) as SMMONREIMP,
			TRIM(IFNULL(SMMONTOFP,0)) as SMMONTOFP,
			TRIM(IFNULL(SMMONSALUD,0)) as SMMONSALUD,
			TRIM(IFNULL(SMMONSALAD,0)) as SMMONSALAD,
			TRIM(IFNULL(SMMONDESAH,0)) as SMMONDESAH,
			TRIM(IFNULL(SMMONCOTFU,0)) as SMMONCOTFU,
			TRIM(IFNULL(SMMONCOTSC,0)) as SMMONCOTSC,
			TRIM(IFNULL(SMENTPREVI,0)) as SMENTPREVI,
			TRIM(IFNULL(SMSUBSINIC,0)) as SMSUBSINIC,
			TRIM(IFNULL(SMINDCONVE,0)) as SMINDCONVE,
			TRIM(IFNULL(SERV_SALUD,0)) as SERV_SALUD,
			TRIM(IFNULL(MONTO_COT,0)) as MONTO_COT
		from SIMATDTA.SMF02 
		WHERE TRIM(SMRUNBENEF) = #run_beneficiario#
	</select>
	
	<select id="getSubsPrePostNMByNumDoc" resultMap="resultSubsPrePostNMVO">
		select 
			SM_ID,
			TRIM(IFNULL(SMMESINFO,'')) as SMMESINFO,
			TRIM(IFNULL(SMCODENTID,0)) as SMCODENTID,
			TRIM(IFNULL(SMAGEENTID,'')) as SMAGEENTID,
			TRIM(IFNULL(SMRUTEMPLE,'')) as SMRUTEMPLE,
			TRIM(IFNULL(SMNOMEMPLE,'')) as SMNOMEMPLE,
			TRIM(IFNULL(SMRUNBENEF,'')) as SMRUNBENEF,
			TRIM(IFNULL(SMNOMBENEF,'')) as SMNOMBENEF,
			TRIM(IFNULL(SMNROLICEN,'')) as SMNROLICEN,
			TRIM(IFNULL(SMCODDIAGN,'')) as SMCODDIAGN,
			TRIM(IFNULL(SMVINBEMEN,0)) as SMVINBEMEN,
			TRIM(IFNULL(SMACLABTRA,'')) as SMACLABTRA,
			TRIM(IFNULL(SMCODCOBEN,'')) as SMCODCOBEN,
			TRIM(IFNULL(SMNRORESOL,'')) as SMNRORESOL,
			TRIM(IFNULL(SMEXTPOSTN,0)) as SMEXTPOSTN,
			TRIM(IFNULL(SMNRONACIM,0)) as SMNRONACIM,
			TRIM(IFNULL(SMDIALICAU,0)) as SMDIALICAU,
			CASE  
				WHEN SMFECINREP IS NULL THEN ''
				WHEN SMFECINREP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECINREP,ISO)
			END AS SMFECINREP_C,
			SMFECINREP,
			CASE  
				WHEN SMFECTEREP IS NULL THEN ''
				WHEN SMFECTEREP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECTEREP,ISO)
			END AS SMFECTEREP_C,
			SMFECTEREP,
			TRIM(IFNULL(SMNUMDIPAG,0)) as SMNUMDIPAG,
			TRIM(IFNULL(SMTIPOPAGO,0)) as SMTIPOPAGO,
			TRIM(IFNULL(SMDFL44_78,0)) as SMDFL44_78,
			TRIM(IFNULL(SMMONTPAGO,0)) as SMMONTPAGO,
			TRIM(IFNULL(SMTIPOEMIS,'')) as SMTIPOEMIS,
			TRIM(IFNULL(SMMESNOMIN,'')) as SMMESNOMIN,
			TRIM(IFNULL(SMMODPAGO,0)) as SMMODPAGO,
			TRIM(IFNULL(SMSERIEDOC,'')) as SMSERIEDOC,
			TRIM(IFNULL(SMNUMDOC,'')) as SMNUMDOC,
			CASE  
				WHEN SMFECEMDOC IS NULL THEN ''
				WHEN SMFECEMDOC = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECEMDOC,ISO)
			END AS SMFECEMDOC_C,
			SMFECEMDOC,
			TRIM(IFNULL(SMMONTODOC,0)) as SMMONTODOC,
			TRIM(IFNULL(SMCODBANCO,'')) as SMCODBANCO,
			TRIM(IFNULL(SMCTA_CTE,'')) as SMCTA_CTE,
			TRIM(IFNULL(SMCAUSAEMI,0)) as SMCAUSAEMI,
			TRIM(IFNULL(SMDIACOTPA,0)) as SMDIACOTPA,
			TRIM(IFNULL(SMMONREIMP,0)) as SMMONREIMP,
			TRIM(IFNULL(SMMONTOFP,0)) as SMMONTOFP,
			TRIM(IFNULL(SMMONSALUD,0)) as SMMONSALUD,
			TRIM(IFNULL(SMMONSALAD,0)) as SMMONSALAD,
			TRIM(IFNULL(SMMONDESAH,0)) as SMMONDESAH,
			TRIM(IFNULL(SMMONCOTFU,0)) as SMMONCOTFU,
			TRIM(IFNULL(SMMONCOTSC,0)) as SMMONCOTSC,
			TRIM(IFNULL(SMENTPREVI,0)) as SMENTPREVI,
			TRIM(IFNULL(SMSUBSINIC,0)) as SMSUBSINIC,
			TRIM(IFNULL(SMINDCONVE,0)) as SMINDCONVE,
			TRIM(IFNULL(SERV_SALUD,0)) as SERV_SALUD,
			TRIM(IFNULL(MONTO_COT,0)) as MONTO_COT 
		from SIMATDTA.SMF02 WHERE TRIM(SMNUMDOC)=#num_documento# 
	</select>	
	
	<select id="getSubsPrePostNMByMesInf" resultMap="resultSubsPrePostNMVO">
		select 
			SM_ID,
			TRIM(IFNULL(SMMESINFO,'')) as SMMESINFO,
			TRIM(IFNULL(SMCODENTID,0)) as SMCODENTID,
			TRIM(IFNULL(SMAGEENTID,'')) as SMAGEENTID,
			TRIM(IFNULL(SMRUTEMPLE,'')) as SMRUTEMPLE,
			TRIM(IFNULL(SMNOMEMPLE,'')) as SMNOMEMPLE,
			TRIM(IFNULL(SMRUNBENEF,'')) as SMRUNBENEF,
			TRIM(IFNULL(SMNOMBENEF,'')) as SMNOMBENEF,
			TRIM(IFNULL(SMNROLICEN,'')) as SMNROLICEN,
			TRIM(IFNULL(SMCODDIAGN,'')) as SMCODDIAGN,
			TRIM(IFNULL(SMVINBEMEN,0)) as SMVINBEMEN,
			TRIM(IFNULL(SMACLABTRA,'')) as SMACLABTRA,
			TRIM(IFNULL(SMCODCOBEN,'')) as SMCODCOBEN,
			TRIM(IFNULL(SMNRORESOL,'')) as SMNRORESOL,
			TRIM(IFNULL(SMEXTPOSTN,0)) as SMEXTPOSTN,
			TRIM(IFNULL(SMNRONACIM,0)) as SMNRONACIM,
			TRIM(IFNULL(SMDIALICAU,0)) as SMDIALICAU,
			CASE  
				WHEN SMFECINREP IS NULL THEN ''
				WHEN SMFECINREP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECINREP,ISO)
			END AS SMFECINREP_C,
			SMFECINREP,
			CASE  
				WHEN SMFECTEREP IS NULL THEN ''
				WHEN SMFECTEREP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECTEREP,ISO)
			END AS SMFECTEREP_C,
			SMFECTEREP,
			TRIM(IFNULL(SMNUMDIPAG,0)) as SMNUMDIPAG,
			TRIM(IFNULL(SMTIPOPAGO,0)) as SMTIPOPAGO,
			TRIM(IFNULL(SMDFL44_78,0)) as SMDFL44_78,
			TRIM(IFNULL(SMMONTPAGO,0)) as SMMONTPAGO,
			TRIM(IFNULL(SMTIPOEMIS,'')) as SMTIPOEMIS,
			TRIM(IFNULL(SMMESNOMIN,'')) as SMMESNOMIN,
			TRIM(IFNULL(SMMODPAGO,0)) as SMMODPAGO,
			TRIM(IFNULL(SMSERIEDOC,'')) as SMSERIEDOC,
			TRIM(IFNULL(SMNUMDOC,'')) as SMNUMDOC,
			CASE  
				WHEN SMFECEMDOC IS NULL THEN ''
				WHEN SMFECEMDOC = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECEMDOC,ISO)
			END AS SMFECEMDOC_C,
			SMFECEMDOC,
			TRIM(IFNULL(SMMONTODOC,0)) as SMMONTODOC,
			TRIM(IFNULL(SMCODBANCO,'')) as SMCODBANCO,
			TRIM(IFNULL(SMCTA_CTE,'')) as SMCTA_CTE,
			TRIM(IFNULL(SMCAUSAEMI,0)) as SMCAUSAEMI,
			TRIM(IFNULL(SMDIACOTPA,0)) as SMDIACOTPA,
			TRIM(IFNULL(SMMONREIMP,0)) as SMMONREIMP,
			TRIM(IFNULL(SMMONTOFP,0)) as SMMONTOFP,
			TRIM(IFNULL(SMMONSALUD,0)) as SMMONSALUD,
			TRIM(IFNULL(SMMONSALAD,0)) as SMMONSALAD,
			TRIM(IFNULL(SMMONDESAH,0)) as SMMONDESAH,
			TRIM(IFNULL(SMMONCOTFU,0)) as SMMONCOTFU,
			TRIM(IFNULL(SMMONCOTSC,0)) as SMMONCOTSC,
			TRIM(IFNULL(SMENTPREVI,0)) as SMENTPREVI,
			TRIM(IFNULL(SMSUBSINIC,0)) as SMSUBSINIC,
			TRIM(IFNULL(SMINDCONVE,0)) as SMINDCONVE,
			TRIM(IFNULL(SERV_SALUD,0)) as SERV_SALUD,
			TRIM(IFNULL(MONTO_COT,0)) as MONTO_COT 
		from SIMATDTA.SMF02 WHERE SMMESINFO=#mes_informacion#
	</select>
	
	<select id="getList_avanzar_SMF02" resultMap="resultSubsPrePostNMVO">
		select 
			SM_ID,
			TRIM(IFNULL(SMMESINFO,'')) as SMMESINFO,
			TRIM(IFNULL(SMCODENTID,0)) as SMCODENTID,
			TRIM(IFNULL(SMAGEENTID,'')) as SMAGEENTID,
			TRIM(IFNULL(SMRUTEMPLE,'')) as SMRUTEMPLE,
			TRIM(IFNULL(SMNOMEMPLE,'')) as SMNOMEMPLE,
			TRIM(IFNULL(SMRUNBENEF,'')) as SMRUNBENEF,
			TRIM(IFNULL(SMNOMBENEF,'')) as SMNOMBENEF,
			TRIM(IFNULL(SMNROLICEN,'')) as SMNROLICEN,
			TRIM(IFNULL(SMCODDIAGN,'')) as SMCODDIAGN,
			TRIM(IFNULL(SMVINBEMEN,0)) as SMVINBEMEN,
			TRIM(IFNULL(SMACLABTRA,'')) as SMACLABTRA,
			TRIM(IFNULL(SMCODCOBEN,'')) as SMCODCOBEN,
			TRIM(IFNULL(SMNRORESOL,'')) as SMNRORESOL,
			TRIM(IFNULL(SMEXTPOSTN,0)) as SMEXTPOSTN,
			TRIM(IFNULL(SMNRONACIM,0)) as SMNRONACIM,
			TRIM(IFNULL(SMDIALICAU,0)) as SMDIALICAU,
			CASE  
				WHEN SMFECINREP IS NULL THEN ''
				WHEN SMFECINREP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECINREP,ISO)
			END AS SMFECINREP_C,
			SMFECINREP,
			CASE  
				WHEN SMFECTEREP IS NULL THEN ''
				WHEN SMFECTEREP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECTEREP,ISO)
			END AS SMFECTEREP_C,
			SMFECTEREP,
			TRIM(IFNULL(SMNUMDIPAG,0)) as SMNUMDIPAG,
			TRIM(IFNULL(SMTIPOPAGO,0)) as SMTIPOPAGO,
			TRIM(IFNULL(SMDFL44_78,0)) as SMDFL44_78,
			TRIM(IFNULL(SMMONTPAGO,0)) as SMMONTPAGO,
			TRIM(IFNULL(SMTIPOEMIS,'')) as SMTIPOEMIS,
			TRIM(IFNULL(SMMESNOMIN,'')) as SMMESNOMIN,
			TRIM(IFNULL(SMMODPAGO,0)) as SMMODPAGO,
			TRIM(IFNULL(SMSERIEDOC,'')) as SMSERIEDOC,
			TRIM(IFNULL(SMNUMDOC,'')) as SMNUMDOC,
			CASE  
				WHEN SMFECEMDOC IS NULL THEN ''
				WHEN SMFECEMDOC = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECEMDOC,ISO)
			END AS SMFECEMDOC_C,
			SMFECEMDOC,
			TRIM(IFNULL(SMMONTODOC,0)) as SMMONTODOC,
			TRIM(IFNULL(SMCODBANCO,'')) as SMCODBANCO,
			TRIM(IFNULL(SMCTA_CTE,'')) as SMCTA_CTE,
			TRIM(IFNULL(SMCAUSAEMI,0)) as SMCAUSAEMI,
			TRIM(IFNULL(SMDIACOTPA,0)) as SMDIACOTPA,
			TRIM(IFNULL(SMMONREIMP,0)) as SMMONREIMP,
			TRIM(IFNULL(SMMONTOFP,0)) as SMMONTOFP,
			TRIM(IFNULL(SMMONSALUD,0)) as SMMONSALUD,
			TRIM(IFNULL(SMMONSALAD,0)) as SMMONSALAD,
			TRIM(IFNULL(SMMONDESAH,0)) as SMMONDESAH,
			TRIM(IFNULL(SMMONCOTFU,0)) as SMMONCOTFU,
			TRIM(IFNULL(SMMONCOTSC,0)) as SMMONCOTSC,
			TRIM(IFNULL(SMENTPREVI,0)) as SMENTPREVI,
			TRIM(IFNULL(SMSUBSINIC,0)) as SMSUBSINIC,
			TRIM(IFNULL(SMINDCONVE,0)) as SMINDCONVE,
			TRIM(IFNULL(SERV_SALUD,0)) as SERV_SALUD,
			TRIM(IFNULL(MONTO_COT,0)) as MONTO_COT 
		from SIMATDTA.SMF02 where SM_ID &gt;= #keyFin# order by SM_ID FETCH FIRST $paginacion$ ROWS ONLY
	</select>
	
	<select id="getList_retroceder_SMF02" resultMap="resultSubsPrePostNMVO">
		select 
			SM_ID,
			TRIM(IFNULL(SMMESINFO,'')) as SMMESINFO,
			TRIM(IFNULL(SMCODENTID,0)) as SMCODENTID,
			TRIM(IFNULL(SMAGEENTID,'')) as SMAGEENTID,
			TRIM(IFNULL(SMRUTEMPLE,'')) as SMRUTEMPLE,
			TRIM(IFNULL(SMNOMEMPLE,'')) as SMNOMEMPLE,
			TRIM(IFNULL(SMRUNBENEF,'')) as SMRUNBENEF,
			TRIM(IFNULL(SMNOMBENEF,'')) as SMNOMBENEF,
			TRIM(IFNULL(SMNROLICEN,'')) as SMNROLICEN,
			TRIM(IFNULL(SMCODDIAGN,'')) as SMCODDIAGN,
			TRIM(IFNULL(SMVINBEMEN,0)) as SMVINBEMEN,
			TRIM(IFNULL(SMACLABTRA,'')) as SMACLABTRA,
			TRIM(IFNULL(SMCODCOBEN,'')) as SMCODCOBEN,
			TRIM(IFNULL(SMNRORESOL,'')) as SMNRORESOL,
			TRIM(IFNULL(SMEXTPOSTN,0)) as SMEXTPOSTN,
			TRIM(IFNULL(SMNRONACIM,0)) as SMNRONACIM,
			TRIM(IFNULL(SMDIALICAU,0)) as SMDIALICAU,
			CASE  
				WHEN SMFECINREP IS NULL THEN ''
				WHEN SMFECINREP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECINREP,ISO)
			END AS SMFECINREP_C,
			SMFECINREP,
			CASE  
				WHEN SMFECTEREP IS NULL THEN ''
				WHEN SMFECTEREP = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECTEREP,ISO)
			END AS SMFECTEREP_C,
			SMFECTEREP,
			TRIM(IFNULL(SMNUMDIPAG,0)) as SMNUMDIPAG,
			TRIM(IFNULL(SMTIPOPAGO,0)) as SMTIPOPAGO,
			TRIM(IFNULL(SMDFL44_78,0)) as SMDFL44_78,
			TRIM(IFNULL(SMMONTPAGO,0)) as SMMONTPAGO,
			TRIM(IFNULL(SMTIPOEMIS,'')) as SMTIPOEMIS,
			TRIM(IFNULL(SMMESNOMIN,'')) as SMMESNOMIN,
			TRIM(IFNULL(SMMODPAGO,0)) as SMMODPAGO,
			TRIM(IFNULL(SMSERIEDOC,'')) as SMSERIEDOC,
			TRIM(IFNULL(SMNUMDOC,'')) as SMNUMDOC,
			CASE  
				WHEN SMFECEMDOC IS NULL THEN ''
				WHEN SMFECEMDOC = DATE ('0001-01-01') THEN ''
				ELSE CHAR(SMFECEMDOC,ISO)
			END AS SMFECEMDOC_C,
			SMFECEMDOC,
			TRIM(IFNULL(SMMONTODOC,0)) as SMMONTODOC,
			TRIM(IFNULL(SMCODBANCO,'')) as SMCODBANCO,
			TRIM(IFNULL(SMCTA_CTE,'')) as SMCTA_CTE,
			TRIM(IFNULL(SMCAUSAEMI,0)) as SMCAUSAEMI,
			TRIM(IFNULL(SMDIACOTPA,0)) as SMDIACOTPA,
			TRIM(IFNULL(SMMONREIMP,0)) as SMMONREIMP,
			TRIM(IFNULL(SMMONTOFP,0)) as SMMONTOFP,
			TRIM(IFNULL(SMMONSALUD,0)) as SMMONSALUD,
			TRIM(IFNULL(SMMONSALAD,0)) as SMMONSALAD,
			TRIM(IFNULL(SMMONDESAH,0)) as SMMONDESAH,
			TRIM(IFNULL(SMMONCOTFU,0)) as SMMONCOTFU,
			TRIM(IFNULL(SMMONCOTSC,0)) as SMMONCOTSC,
			TRIM(IFNULL(SMENTPREVI,0)) as SMENTPREVI,
			TRIM(IFNULL(SMSUBSINIC,0)) as SMSUBSINIC,
			TRIM(IFNULL(SMINDCONVE,0)) as SMINDCONVE,
			TRIM(IFNULL(SERV_SALUD,0)) as SERV_SALUD,
			TRIM(IFNULL(MONTO_COT,0)) as MONTO_COT 
		from SIMATDTA.SMF02 where SM_ID &gt;= #keyInicio# order by SM_ID FETCH FIRST $paginacion$ ROWS ONLY
	</select>
	
	<insert id="setSubsPrePostNMIbatis" parameterClass="cl.laaraucana.simat.entidades.SubsPrePostNMVO">

		INSERT INTO SIMATDTA.SMF02 (SM_ID,SMMESINFO,SMCODENTID,SMAGEENTID,SMRUTEMPLE,SMNOMEMPLE,SMRUNBENEF,SMNOMBENEF,SMNROLICEN,SMCODDIAGN,SMVINBEMEN,SMACLABTRA,SMCODCOBEN,SMNRORESOL,SMEXTPOSTN,SMNRONACIM,SMDIALICAU,SMFECINREP,SMFECTEREP,SMNUMDIPAG,SMTIPOPAGO,SMDFL44_78,SMMONTPAGO,SMTIPOEMIS,SMMESNOMIN,SMMODPAGO,SMSERIEDOC,SMNUMDOC,SMFECEMDOC,SMMONTODOC,SMCODBANCO,SMCTA_CTE,SMCAUSAEMI,SMDIACOTPA,SMMONREIMP,SMMONTOFP,SMMONSALUD,SMMONSALAD,SMMONDESAH,SMMONCOTFU,SMMONCOTSC,SMENTPREVI,SMSUBSINIC,SMINDCONVE,SERV_SALUD,MONTO_COT)
   		VALUES (IFNULL((select max(SM_ID)+1 from SIMATDTA.SMF02),0),#mes_informacion#,#codigo_entidad#,#agencia_entidad#,#rut_empleador#,#nombre_empleador#,#run_beneficiario#,#nombre_beneficiario#,#nro_licencia#,#codigo_diagnostico#,#vinculo_beneficiario_menor#,#actividad_laboral_trabajador#,#cod_comuna_beneficiario#,#nro_resolucion#,#extension_postnatal#,#nro_nacimientos#,#num_dias_licencia_autorizados#,#fecha_inicio_reposo#,#fecha_termino_reposo#,#num_dias_sub_pagadados#,#tipo_de_pago#,#monto_sub_dfl44_1978#,#monto_sub_pagado#,#tipo_emision#,#mes_nomina#,#mod_pago#,#serie_documento#,#num_documento#,#fecha_emision_documento#,#monto_documento#,#codigo_banco#,#cta_cte#,#causal_emision#,#num_dias_cotiz_pagados#,#monto_renum_imponible#,#monto_fp#,#monto_salud#,#monto_salud_ad#,#monto_desahucio#,#monto_cotiz_fu#,#monto_cotiz_sc#,#entidad_previsional#,#subsidio_iniciado#,#indicador_convenio#,#serv_salud#,#monto_cot#)
   		WITH NC	
	</insert>
		
	<update id="updateUnoSubsPrePostNMIbatis" parameterClass="cl.laaraucana.simat.entidades.SubsPrePostNMVO">
		  UPDATE SIMATDTA.SMF02 SET 
 			 SMMESINFO=#mes_informacion#,
			 SMCODENTID=#codigo_entidad#,
			 SMAGEENTID=#agencia_entidad#,
			 SMRUTEMPLE=#rut_empleador#,
			 SMNOMEMPLE=#nombre_empleador#,
			 SMRUNBENEF=#run_beneficiario#,
		 	 SMNOMBENEF=#nombre_beneficiario#,
			 SMNROLICEN=#nro_licencia#,
			 SMCODDIAGN=#codigo_diagnostico#,
			 SMVINBEMEN=#vinculo_beneficiario_menor#,
			 SMACLABTRA=#actividad_laboral_trabajador#,
			 SMCODCOBEN=#cod_comuna_beneficiario#,
			 SMNRORESOL=#nro_resolucion#,
			 SMEXTPOSTN=#extension_postnatal#,
			 SMNRONACIM=#nro_nacimientos#,
			 SMDIALICAU=#num_dias_licencia_autorizados#,
			 SMFECINREP=#fecha_inicio_reposo#,
			 SMFECTEREP=#fecha_termino_reposo#,
			 SMNUMDIPAG=#num_dias_sub_pagadados#,
			 SMTIPOPAGO=#tipo_de_pago#,
			 SMDFL44_78=#monto_sub_dfl44_1978#,
			 SMMONTPAGO=#monto_sub_pagado#,
			 SMTIPOEMIS=#tipo_emision#,
			 SMMESNOMIN=#mes_nomina#,
			 SMMODPAGO=#mod_pago#,
			 SMSERIEDOC=#serie_documento#,
			 SMNUMDOC=#num_documento#,
			 SMFECEMDOC= #fecha_emision_documento#,
			 SMMONTODOC=#monto_documento#,
			 SMCODBANCO=#codigo_banco#,
			 SMCTA_CTE=#cta_cte#,
			 SMCAUSAEMI=#causal_emision#,
			 SMDIACOTPA=#num_dias_cotiz_pagados#,
			 SMMONREIMP=#monto_renum_imponible#,
			 SMMONTOFP=#monto_fp#,
			 SMMONSALUD=#monto_salud#,
			 SMMONSALAD=#monto_salud_ad#,
			 SMMONDESAH=#monto_desahucio#,
			 SMMONCOTFU=#monto_cotiz_fu#,
			 SMMONCOTSC=#monto_cotiz_sc#,
			 SMENTPREVI=#entidad_previsional#,
			 SMSUBSINIC=#subsidio_iniciado#,
			 SMINDCONVE=#indicador_convenio#,
			 MONTO_COT=#monto_cot#
			 WHERE SM_ID=#id#
			 WITH NC 
	</update>
	
	<delete id="delSubsPrePostNMIbatis" parameterClass="cl.laaraucana.simat.entidades.SubsPrePostNMVO">
		DELETE FROM SIMATDTA.SMF02 WHERE SM_ID=#id#
		WITH NC 
	</delete>
	

	
	
</sqlMap>
